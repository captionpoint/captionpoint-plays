<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>{{title}}</title>
  {{{style}}}
  {{{remarkScript}}}
  <script>
    var slideshow;

    function create() {
      return remark.create({
        {{{source}}},
        ratio: '16:9',
        countIncrementalSlides: false,
        slideNumberFormat: '',
        navigation: {
          scroll: false
        }
      });
    }

    // Handle messages from the extension
    window.addEventListener('message', event => {
      const message = event.data;

      if (message.command === 'gotoSlide') {
        if (slideshow && typeof message.slideIndex === 'number') {
          slideshow.gotoSlide(message.slideIndex + 1); // Remark uses 1-based indexing
        }
      }
    });
  </script>
</head>
<body onload="slideshow = create()">
</body>
</html>
